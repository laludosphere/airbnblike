<div class="main-container">
  <div class="cards-container">
    <div class="search">
      <%= simple_form_for :flats_filter, url: flats_path, method: :get do |f| %>
        <%= f.input :search, label: false,
                             input_html: { placeholder: "Champ de recherche" } %>
        <div class="row">
          <div class="col-12 col-md-6 col-lg-3">
            <%= f.input :min_price, label: false,
                                    input_html: { type: :number,
                                                  min: "0",
                                                  placeholder: "Prix mini" } %>
          </div>
          <div class="col-12 col-md-6 col-lg-3">
            <%= f.input :max_price, label: false,
                                    input_html: { type: :number,
                                                  placeholder: "Prix max" } %>
          </div>
          <div class="col-12 col-md-6 col-lg-3">
            <%= f.input :start_date, label: false,
                                     input_html: { type: :date } %>

          </div>
          <div class="col-12 col-md-6 col-lg-3">
            <%= f.input :end_date, label: false,
                                   input_html: { type: :date } %>
          </div>
        </div>
        <%= f.submit "Chercher", class: "" %>
      <% end %>
    </div>

  <div class="container">
    <div class="card-list">
    <% @flats.each do |flat| %>
      <div class="card">
        <li><%= link_to flat.name, flat_path(flat) %></li>
          <div class="card-header">
            <li><%= flat.address  %></li>
            <li><%= flat.price  %>â‚¬</li>
          </div>
          <div class="card-author">
          <div class="author-avatar">
            <a class="author-avatar" href="#">
              <%= image_tag "https://kitt.lewagon.com/placeholder/users/ssaunier"%>
            </a>
              <svg class="half-circle" viewBox="0 0 106 57">
              <path d="M102 4c0 27.1-21.9 49-49 49S4 31.1 4 4"></path>
            </svg>
          </div>
          </div>
      </div>
    <% end %>
    </div>  
  </div>
  <p><%= link_to 'Add a Flat', new_flat_path(@flat)  %></p> 
  <p><%= @flat_count %> </p>    
    <div id="map"
        style="width: 100%; height: 600px;"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
</div>